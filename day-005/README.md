# Day 005 Progress Log

This README summarizes the work done on Day 005, following the daily log convention defined in the root README.

**DATE:** _Monday, August 11, 2025_

## Tasks/Activities
- Advanced the Node.js **NPI DB scraper** project
  - Fixed repeated *Cloudflare* verification by removing manual header overrides that conflicted with the verification token
  - Implemented a single scraping endpoint supporting parameters for:
    - Specific page by number
    - A range of page numbers
    - Even pages
    - Odd pages
    - All pages
    - A selected list of page numbers
  - Tested the endpoint in *Postman* and saved successful responses; identified several minor business-logic issues to address
- Practiced *Kubernetes* fundamentals: Pods, Services, and Volumes
  - Implemented multiple Service types: `ClusterIP` (in-cluster), `NodePort` (internal/external with manual external config), `LoadBalancer` (cloud-provider integration), `ExternalName` (DNS-only alias)
  - Clarified storage concepts: `PersistentVolume` (storage) vs `PersistentVolumeClaim` (binding/consumption)
  - Created and validated an `EmptyDir` volume that is cleared when the Pod restarts or is destroyed
- Started learning *Helm* and basic release lifecycle
  - Reviewed concepts: chart (metadata + manifests), templates, values, repository, release
  - Created a basic chart and exercised `install`/`upgrade`/`history`/`rollback`/`uninstall`

## Tools/Technologies
- Node.js
- Cursor
- Postman
- Kubernetes (`kubectl` and `minikube`)
- Helm

## Blockers
- Repeated Cloudflare verification during scraping due to manual header overrides (resolved)
- Outstanding minor logic bugs in the scraperâ€™s parameter handling (to be fixed)
- Need deeper familiarity with Helm templating and values configuration

## Details
- Service type notes: `ClusterIP` (cluster-internal), `NodePort` (exposes a static port on nodes; external access requires networking setup), `LoadBalancer` (provisions an external LB via cloud integration), `ExternalName` (DNS CNAME-style redirection)
- Storage: `PersistentVolume` provides storage; `PersistentVolumeClaim` binds workloads to that storage. `EmptyDir` is ephemeral and resets on Pod restart/deletion
- *Helm* commands practiced:

```bash
helm create mychart
helm install myapp mychart/
helm upgrade myapp mychart/ --set image.tag=2.0
helm history myapp
helm rollback myapp 1
helm uninstall myapp
```


### Helm Project Structure and Sample Files

The following structure is generated by `helm create mychart`:

```text
mychart/
  Chart.yaml
  values.yaml
  charts/
  templates/
    NOTES.txt
    _helpers.tpl
    deployment.yaml
    hpa.yaml
    ingress.yaml
    service.yaml
    serviceaccount.yaml
    tests/
      test-connection.yaml
```

Sample files (trimmed):

```yaml
# Chart.yaml
apiVersion: v2
name: mychart
description: A Helm chart for Kubernetes
type: application
version: 0.1.0
appVersion: "1.0.0"
```

```yaml
# values.yaml (partial)
replicaCount: 1

image:
  repository: nginx
  tag: "1.25.2"
  pullPolicy: IfNotPresent

service:
  type: ClusterIP
  port: 80

resources: {}

ingress:
  enabled: false

autoscaling:
  enabled: false
```

```yaml
# templates/deployment.yaml (partial)
apiVersion: apps/v1
kind: Deployment
metadata:
  name: {{ include "mychart.fullname" . }}
  labels:
    {{- include "mychart.labels" . | nindent 4 }}
spec:
  replicas: {{ .Values.replicaCount }}
  selector:
    matchLabels:
      {{- include "mychart.selectorLabels" . | nindent 6 }}
  template:
    metadata:
      labels:
        {{- include "mychart.selectorLabels" . | nindent 8 }}
    spec:
      containers:
        - name: {{ .Chart.Name }}
          image: "{{ .Values.image.repository }}:{{ .Values.image.tag }}"
          imagePullPolicy: {{ .Values.image.pullPolicy }}
          ports:
            - containerPort: 80
```

```yaml
# templates/service.yaml (partial)
apiVersion: v1
kind: Service
metadata:
  name: {{ include "mychart.fullname" . }}
  labels:
    {{- include "mychart.labels" . | nindent 4 }}
spec:
  type: {{ .Values.service.type }}
  ports:
    - port: {{ .Values.service.port }}
      targetPort: 80
      protocol: TCP
      name: http
  selector:
    {{- include "mychart.selectorLabels" . | nindent 4 }}
```

